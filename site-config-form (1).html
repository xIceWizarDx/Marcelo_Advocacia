<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Gerador de SITE_CONFIG → site-config.js + Prompt (TXT)</title>
  <style>
    :root{
      /* CLARO por padrão */
      --bg:#f8fafc; --card:#ffffff; --muted:#64748b; --text:#0f172a; --line:#e2e8f0; --pri:#4f46e5;
    }
    /* Dark opcional via preferências do sistema */
    @media (prefers-color-scheme: dark){
      :root{ --bg:#0b1220; --card:#0f172a; --muted:#8a9db7; --text:#e5e7eb; --line:#1f2a40; --pri:#4f46e5; }
    }
    *{box-sizing:border-box}
    body{margin:0;background:linear-gradient(180deg,var(--bg),#eef2ff);font:14px/1.6 system-ui,Segoe UI,Roboto,Inter;color:var(--text)}
    .wrap{max-width:1100px;margin:28px auto;padding:0 16px}
    .title{display:flex;gap:12px;align-items:center;margin-bottom:16px}
    .title h1{font-size:20px;margin:0}
    .card{background:var(--card);border:1px solid var(--line);border-radius:16px;padding:18px;margin-bottom:16px;box-shadow:0 10px 30px rgba(15,23,42,.06)}
    fieldset{border:1px dashed var(--line);border-radius:12px;padding:12px;margin:12px 0}
    legend{padding:0 6px;color:var(--muted);font-weight:700}
    label{display:block;font-weight:600;margin:8px 0 4px}
    input[type="text"], input[type="email"], input[type="url"]{
      width:100%;padding:10px 12px;border-radius:10px;border:1px solid var(--line);background:#fff;color:var(--text);
    }
    .row{display:grid;grid-template-columns:repeat(12,1fr);gap:12px}
    .col-6{grid-column:span 6} .col-4{grid-column:span 4} .col-3{grid-column:span 3} .col-8{grid-column:span 8} .col-12{grid-column:span 12}
    @media (max-width: 820px){ .col-6,.col-4,.col-3,.col-8{grid-column:span 12} }
    .muted{color:var(--muted);font-size:12px}
    .chips{display:flex;flex-wrap:wrap;gap:8px}
    .chip{display:inline-flex;align-items:center;gap:6px;border:1px solid var(--line);padding:6px 8px;border-radius:999px}
    .actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:8px}
    button{background:var(--pri);color:white;border:none;padding:10px 14px;border-radius:10px;cursor:pointer;font-weight:700;box-shadow:0 6px 16px rgba(79,70,229,.20)}
    button.ghost{background:transparent;border:1px solid var(--line);color:#334155}
    .small{font-size:12px}
    .hr{height:1px;background:var(--line);margin:12px 0}
    .grid-list{display:grid;grid-template-columns:repeat(2,1fr);gap:8px}
    @media (max-width:700px){.grid-list{grid-template-columns:1fr}}
    .checkbox{display:flex;gap:8px;align-items:center}
    .tabs{display:flex;gap:6px;margin:8px 0}
    .tab{border:1px solid var(--line);background:#fff;border-radius:8px;padding:6px 10px;cursor:pointer}
    .tab[aria-selected="true"]{outline:2px solid #c7d2fe}
    .preview{white-space:pre-wrap;background:#fff;border:1px solid var(--line);border-radius:12px;padding:12px;min-height:120px}
    .pill{font-size:11px;border:1px solid var(--line);padding:2px 6px;border-radius:999px;color:#475569}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="title">
      <h1>Formulário do <span class="pill">SITE_CONFIG</span> → gera <code>site-config.js</code> e <code>Prompt (TXT)</code></h1>
    </div>

    <div class="card">
      <p class="muted">Preencha os campos abaixo (baseado no bloco <strong>0) SITE_CONFIG</strong> do seu PROMPT). No final, clique em <em>Gerar arquivo JS</em> ou <em>Gerar Prompt (TXT)</em>.</p>
    </div>

    <form id="form" class="card">
      <!-- PROJECT -->
      <fieldset>
        <legend>Projeto</legend>
        <div class="row">
          <div class="col-6">
            <label>Nome da empresa</label>
            <input type="text" id="project.name" placeholder="Ex.: Marcelo Baía Advocacia" required>
          </div>
          <div class="col-6">
            <label>Slogan (opcional)</label>
            <input type="text" id="project.tagline" placeholder="Ex.: Assessoria jurídica clara e segura">
          </div>

          <div class="col-4">
            <label>Sector Pack</label>
            <input type="text" id="project.sector_pack" list="sectors" value="servicos">
            <datalist id="sectors">
              <option value="advocacia"><option value="saude"><option value="financas">
              <option value="educacao"><option value="restaurante"><option value="servicos">
              <option value="varejo"><option value="tecnologia"><option value="evento"><option value="outro">
            </datalist>
          </div>
          <div class="col-4">
            <label>Archetype</label>
            <input type="text" id="project.archetype" list="archs" value="institucional">
            <datalist id="archs">
              <option value="institucional"><option value="landing"><option value="portfolio">
              <option value="catalogo"><option value="saas"><option value="evento">
            </datalist>
          </div>
          <div class="col-4">
            <label>Region Pack</label>
            <input type="text" id="project.region_pack" list="regions" value="br">
            <datalist id="regions">
              <option value="br"><option value="eu"><option value="us"><option value="latam"><option value="global">
            </datalist>
          </div>

          <div class="col-6">
            <label>Channel primário</label>
            <input type="text" id="project.channel_pack.primary" list="channels" value="whatsapp">
          </div>
          <div class="col-6">
            <label>Channel secundário</label>
            <input type="text" id="project.channel_pack.secondary" list="channels" value="telefone">
            <datalist id="channels">
              <option value="whatsapp"><option value="telefone"><option value="formulario"><option value="telegram"><option value="email"><option value="none">
            </datalist>
          </div>

          <div class="col-4">
            <label>Idioma</label>
            <input type="text" id="project.locale.lang" value="pt-BR">
          </div>
          <div class="col-4">
            <label>Moeda</label>
            <input type="text" id="project.locale.currency" value="BRL">
          </div>
          <div class="col-4">
            <label>Timezone</label>
            <input type="text" id="project.locale.timezone" value="America/Cuiaba">
          </div>

          <div class="col-12">
            <label>Tom de voz</label>
            <input type="text" id="project.tone" list="tones" value="serio">
            <datalist id="tones">
              <option value="serio"><option value="tecnico"><option value="amigavel"><option value="premium"><option value="criativo">
            </datalist>
          </div>
        </div>
      </fieldset>

      <!-- IDENTIDADE -->
      <fieldset>
        <legend>Identidade & Contatos</legend>
        <div class="row">
          <div class="col-6">
            <label>Registro (tipo)</label>
            <input type="text" id="identity.registration.type" placeholder="Ex.: OAB/MT">
          </div>
          <div class="col-6">
            <label>Registro (valor)</label>
            <input type="text" id="identity.registration.value" placeholder="Ex.: OAB/MT 14.159-B">
          </div>
          <div class="col-12">
            <label>Endereço completo</label>
            <input type="text" id="identity.address" placeholder="Rua, número – bairro, cidade – UF – CEP">
          </div>
          <div class="col-6">
            <label>Telefone (exibição)</label>
            <input type="text" id="identity.phone_display" placeholder="(66) 99911-1314">
          </div>
          <div class="col-6">
            <label>Telefone (link tel:)</label>
            <input type="text" id="identity.phone_link" placeholder="tel:+5566999111314">
          </div>
          <div class="col-6">
            <label>WhatsApp (wa.me)</label>
            <input type="text" id="identity.whatsapp_wa_me" placeholder="https://wa.me/5566999111314">
          </div>
          <div class="col-6">
            <label>E-mail</label>
            <input type="email" id="identity.email" placeholder="mailto:contato@exemplo.com">
          </div>
          <div class="col-12">
            <label>Horário de atendimento</label>
            <input type="text" id="identity.hours" placeholder="Seg a Sex, 9h–18h">
          </div>
          <div class="col-6">
            <label>CTA primário</label>
            <input type="text" id="identity.default_cta.primary" value="Falar no WhatsApp">
          </div>
          <div class="col-6">
            <label>CTA secundário</label>
            <input type="text" id="identity.default_cta.secondary" value="Ligar agora">
          </div>
        </div>
      </fieldset>

      <!-- THEME -->
      <fieldset>
        <legend>Tema (tokens)</legend>
        <div class="row">
          <div class="col-3"><label>primary</label><input type="text" id="theme.colors.primary" value="#0f172a"></div>
          <div class="col-3"><label>accent</label><input type="text" id="theme.colors.accent" value="#4f46e5"></div>
          <div class="col-3"><label>success</label><input type="text" id="theme.colors.success" value="#16a34a"></div>
          <div class="col-3"><label>warning</label><input type="text" id="theme.colors.warning" value="#f59e0b"></div>
          <div class="col-3"><label>textStrong</label><input type="text" id="theme.colors.textStrong" value="#334155"></div>
          <div class="col-3"><label>textSoft</label><input type="text" id="theme.colors.textSoft" value="#475569"></div>
          <div class="col-3"><label>surface</label><input type="text" id="theme.colors.surface" value="#fafafa"></div>
          <div class="col-3"><label>border</label><input type="text" id="theme.colors.border" value="#e4e4e7"></div>

          <div class="col-6"><label>Tipografia (headings)</label><input type="text" id="theme.typography.headings" value="Merriweather, serif"></div>
          <div class="col-6"><label>Tipografia (body)</label><input type="text" id="theme.typography.body" value="Inter, sans-serif"></div>

          <div class="col-6"><label>Raios (radii)</label><input type="text" id="theme.radii" value="0.5rem"></div>
          <div class="col-3"><label>Motion: duração min (ms)</label><input type="text" id="theme.motion.duration_min" value="150"></div>
          <div class="col-3"><label>Motion: duração max (ms)</label><input type="text" id="theme.motion.duration_max" value="400"></div>
          <div class="col-12"><label>Motion: easing</label><input type="text" id="theme.motion.easing" value="cubic-bezier(0.2,0.8,0.2,1)"></div>
        </div>
      </fieldset>

      <!-- EDIÇÃO DO PROJETO -->
      <fieldset>
        <legend>Edição do projeto</legend>
        <div class="chips" role="radiogroup" aria-label="Edição do projeto">
          <label class="chip"><input type="radio" name="edition" id="edition.bootstrap" checked> Bootstrap (recomendado)</label>
          <label class="chip"><input type="radio" name="edition" id="edition.tailwind"> Tailwind</label>
        </div>
        <p class="muted small">Ao trocar a edição ajustamos os chips do Stack automaticamente.</p>
      </fieldset>

      <!-- STACK -->
      <fieldset>
        <legend>Stack</legend>
        <div class="chips">
          <span class="chip"><input type="checkbox" id="stack.framework" checked>Next.js</span>
          <span class="chip"><input type="checkbox" id="stack.typescript" checked>TypeScript</span>
          <span class="chip"><input type="checkbox" id="stack.tailwind">Tailwind</span>
          <span class="chip"><input type="checkbox" id="stack.bootstrap" checked>Bootstrap</span>
          <span class="chip"><input type="checkbox" id="stack.hosting" checked>Vercel</span>
        </div>
        <p class="muted small">Bootstrap marcado para edição Bootstrap; Tailwind marcado para edição Tailwind.</p>
      </fieldset>

      <!-- PAGES -->
      <fieldset>
        <legend>Páginas</legend>
        <div class="row">
          <div class="col-6">
            <label>Incluir</label>
            <div class="grid-list" id="includeList"></div>
          </div>
          <div class="col-6">
            <label>Opcionais</label>
            <div class="grid-list" id="optionalList"></div>
          </div>
        </div>
        <p class="muted small">Marque as páginas que deseja gerar.</p>
      </fieldset>

      <div class="actions">
        <button type="submit">Gerar arquivo JS</button>
        <button type="button" id="previewJsonBtn" class="ghost">Pré-visualizar JSON</button>
        <button type="button" id="previewPromptBtn" class="ghost">Pré-visualizar PROMPT</button>
        <button type="button" id="downloadPromptBtn">Gerar Prompt (TXT)</button>
      </div>
    </form>

    <div class="card">
      <div class="tabs">
        <button class="tab" id="tabJson" aria-selected="true">JSON</button>
        <button class="tab" id="tabPrompt" aria-selected="false">PROMPT</button>
      </div>
      <div id="preview" class="preview"></div>
    </div>
  </div>

  <script>
    // ===== Arrays de páginas (alinhados à arquitetura atual)
    const includes = [
      "home","sobre","atuacao","atuacao/civel","atuacao/consumidor","atuacao/familia","atuacao/empresarial",
      "faq","conteudo","contato","politica-de-privacidade","termos","acessibilidade"
    ];
    const optionals = ["sitemap.xml","robots.txt","humans.txt"];

    function mountCheckList(containerId, items, checked = true){
      const el = document.getElementById(containerId);
      el.innerHTML = "";
      items.forEach(name => {
        const id = containerId + '-' + name;
        const wrap = document.createElement('label');
        wrap.className = 'checkbox';
        wrap.innerHTML = \`<input type="checkbox" id="\${id}" \${checked ? 'checked':''}> <span>\${name}</span>\`;
        el.appendChild(wrap);
      });
    }
    mountCheckList('includeList', includes, true);
    mountCheckList('optionalList', optionals, false);

    // ===== Helpers
    const $ = sel => document.querySelector(sel);
    function getVal(id){ return (document.getElementById(id)?.value || '').trim(); }
    function getBool(id){ return !!document.getElementById(id)?.checked; }

    // ===== Edition switch (Bootstrap vs Tailwind) -> ajusta chips do stack
    function applyEdition(){
      const isTailwind = document.getElementById('edition.tailwind').checked;
      const $tw = document.getElementById('stack.tailwind');
      const $bs = document.getElementById('stack.bootstrap');
      if ($tw) $tw.checked = isTailwind;
      if ($bs) $bs.checked = !isTailwind;
    }
    document.getElementById('edition.bootstrap').addEventListener('change', applyEdition);
    document.getElementById('edition.tailwind').addEventListener('change', applyEdition);

    // ===== Autosave (localStorage)
    const FORM_KEY = 'SITE_CONFIG_FORM_V2';
    function saveForm(){ localStorage.setItem(FORM_KEY, JSON.stringify(Object.fromEntries(new FormData(document.getElementById('form'))))); }
    function restoreForm(){
      const raw = localStorage.getItem(FORM_KEY); if(!raw) return;
      const data = JSON.parse(raw);
      Object.entries(data).forEach(([k,v])=>{
        const el = document.getElementById(k);
        if(!el) return;
        if(el.type==='checkbox' || el.type==='radio'){
          el.checked = (v === 'on' || v === true || v === 'true');
        }else{
          el.value = v;
        }
      });
      applyEdition();
    }
    window.addEventListener('DOMContentLoaded', restoreForm);
    document.getElementById('form').addEventListener('input', saveForm);

    // ===== Validações simples (wa.me e tel:)
    function validateIdentity(){
      const wa = getVal('identity.whatsapp_wa_me');
      const tel = getVal('identity.phone_link');
      if(wa && !/^https?:\/\/wa\.me\/\d+/.test(wa)) alert('WhatsApp deve ser https://wa.me/SEUNUMERO');
      if(tel && !/^tel:\+\d+/.test(tel)) alert('Telefone (link) deve começar com tel:+');
    }

    // ===== Build de config
    function buildConfig(){
      const include = includes.filter(n => document.getElementById('includeList-' + n).checked);
      const optional = optionals.filter(n => document.getElementById('optionalList-' + n).checked);
      const duration_min = parseInt(getVal('theme.motion.duration_min') || '150', 10);
      const duration_max = parseInt(getVal('theme.motion.duration_max') || '400', 10);

      // Stack flags
      const stack = {
        framework: getBool('stack.framework') ? 'nextjs' : '',
        typescript: getBool('stack.typescript'),
        tailwind: getBool('stack.tailwind'),
        bootstrap: getBool('stack.bootstrap'),
        hosting: getBool('stack.hosting') ? 'vercel' : ''
      };

      const cfg = {
        project: {
          name: getVal('project.name'),
          tagline: getVal('project.tagline'),
          sector_pack: getVal('project.sector_pack') || 'servicos',
          archetype: getVal('project.archetype') || 'institucional',
          region_pack: getVal('project.region_pack') || 'br',
          channel_pack: {
            primary: getVal('project.channel_pack.primary') || 'whatsapp',
            secondary: getVal('project.channel_pack.secondary') || 'telefone'
          },
          locale: {
            lang: getVal('project.locale.lang') || 'pt-BR',
            currency: getVal('project.locale.currency') || 'BRL',
            timezone: getVal('project.locale.timezone') || 'America/Cuiaba'
          },
          tone: getVal('project.tone') || 'serio'
        },
        identity: {
          registration: { type: getVal('identity.registration.type'), value: getVal('identity.registration.value') },
          address: getVal('identity.address'),
          phone_display: getVal('identity.phone_display'),
          phone_link: getVal('identity.phone_link'),
          whatsapp_wa_me: getVal('identity.whatsapp_wa_me'),
          email: getVal('identity.email'),
          hours: getVal('identity.hours'),
          default_cta: { primary: getVal('identity.default_cta.primary') || 'Falar no WhatsApp', secondary: getVal('identity.default_cta.secondary') || 'Ligar agora' }
        },
        theme: {
          colors: {
            primary: getVal('theme.colors.primary') || '#0f172a',
            accent: getVal('theme.colors.accent') || '#4f46e5',
            success: getVal('theme.colors.success') || '#16a34a',
            warning: getVal('theme.colors.warning') || '#f59e0b',
            textStrong: getVal('theme.colors.textStrong') || '#334155',
            textSoft: getVal('theme.colors.textSoft') || '#475569',
            surface: getVal('theme.colors.surface') || '#fafafa',
            border: getVal('theme.colors.border') || '#e4e4e7'
          },
          typography: {
            headings: getVal('theme.typography.headings') || 'Merriweather, serif',
            body: getVal('theme.typography.body') || 'Inter, sans-serif'
          },
          radii: getVal('theme.radii') || '0.5rem',
          motion: { duration: [duration_min, duration_max], easing: getVal('theme.motion.easing') || 'cubic-bezier(0.2,0.8,0.2,1)' }
        },
        stack: {
          framework: stack.framework || 'nextjs',
          typescript: stack.typescript,
          tailwind: stack.tailwind,
          bootstrap: stack.bootstrap,
          hosting: stack.hosting || 'vercel'
        },
        pages: { include, optional }
      };
      return cfg;
    }

    // ===== Gerador de PROMPT (TXT) — seções 0→4 (expansível)
    function generatePromptFromConfig(cfg){
      return `# 🧭 INSTRUÇÕES AO GERADOR (prioridade absoluta)

* Siga exatamente as seções abaixo. Em caso de conflito, priorize CONFIGURAÇÕES INICIAIS.
* PROIBIDO inserir qualquer menção a Rocket.new/DhiWise (em UI, README, comentários, meta).
* Responsividade planejada para dispositivos móveis é REQUISITO OBRIGATÓRIO.
* Todos os contatos devem ser idênticos em header, footer, /contato, CTAs, schemas e conteúdo.

---

# 0) CONFIGURAÇÕES INICIAIS (variáveis globais)

* Projeto/Marca: **${cfg.project.name}**
* Idioma: **${cfg.project.locale.lang}** | Moeda: **${cfg.project.locale.currency}** | Timezone: **${cfg.project.locale.timezone}**
* Identificação: **${(cfg.identity.registration.type||'') + ' ' + (cfg.identity.registration.value||'')}**
* Contatos oficiais:
  * Telefone (exibição): **${cfg.identity.phone_display || ''}**
  * Telefone (link): **${cfg.identity.phone_link || ''}**
  * WhatsApp (link obrigatório para TODOS os botões/links): **${cfg.identity.whatsapp_wa_me || ''}**
  * E-mail: **${cfg.identity.email || ''}**
  * Endereço: **${cfg.identity.address || ''}**
  * Horário: **${cfg.identity.hours || ''}**
* CTA padrão: **${cfg.identity.default_cta.primary}** (primário) | **${cfg.identity.default_cta.secondary}** (secundário)
* Tom & estilo: **${cfg.project.tone}**
* Regras OAB (Provimento 205/2021): sem promessas de resultado; conteúdo informativo; privacidade e consentimento claros.

---

# 1) STYLE / THEME (Design Tokens)
* Cores:
  * Primary: **${cfg.theme.colors.primary}**
  * Accent: **${cfg.theme.colors.accent}**
  * Success: **${cfg.theme.colors.success}**
  * Warning: **${cfg.theme.colors.warning}**
  * Text forte: **${cfg.theme.colors.textStrong}** | Text suave: **${cfg.theme.colors.textSoft}**
  * Surface: **${cfg.theme.colors.surface}** | Border: **${cfg.theme.colors.border}**
* Tipografia:
  * Headings: **"${cfg.theme.typography.headings}"** | Corpo: **"${cfg.theme.typography.body}"**
* Motion: **${cfg.theme.motion.duration[0]}–${cfg.theme.motion.duration[1]}ms**, easing **${cfg.theme.motion.easing}**
* Raios: **${cfg.theme.radii}**

---

# 2) STACK
* Next.js + TypeScript + ${cfg.stack.bootstrap ? 'Bootstrap 5' : (cfg.stack.tailwind ? 'Tailwind CSS' : 'CSS')}

---

# 3) ARQUITETURA
* Páginas incluídas:
${cfg.pages.include.map(p=>`  * /${p}`).join('\n')}
* Opcionais:
${cfg.pages.optional.map(p=>`  * ${p}`).join('\n')}

---

# 4) ROTAS & ARQUITETURA DE INFORMAÇÃO
(usar a lista acima como fonte da geração)

---`;
    }

    // ===== Preview em abas
    const $preview = document.getElementById('preview');
    let currentTab = 'json';
    function showJson(){ $preview.textContent = JSON.stringify(buildConfig(), null, 2); }
    function showPrompt(){ $preview.textContent = generatePromptFromConfig(buildConfig()); }
    document.getElementById('previewJsonBtn').addEventListener('click', ()=>{ currentTab='json'; setTabs(); showJson(); });
    document.getElementById('previewPromptBtn').addEventListener('click', ()=>{ currentTab='prompt'; setTabs(); showPrompt(); });
    document.getElementById('tabJson').addEventListener('click', ()=>{ currentTab='json'; setTabs(); showJson(); });
    document.getElementById('tabPrompt').addEventListener('click', ()=>{ currentTab='prompt'; setTabs(); showPrompt(); });
    function setTabs(){
      document.getElementById('tabJson').setAttribute('aria-selected', currentTab==='json');
      document.getElementById('tabPrompt').setAttribute('aria-selected', currentTab==='prompt');
    }

    // ===== Downloaders
    document.getElementById('downloadPromptBtn').addEventListener('click', ()=>{
      const txt = generatePromptFromConfig(buildConfig());
      download('prompt-universal-preenchido.txt', txt, 'text/plain;charset=utf-8');
    });

    function download(filename, text, type='text/javascript;charset=utf-8'){
      const blob = new Blob([text], {type});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = filename;
      document.body.appendChild(a); a.click(); a.remove();
      setTimeout(()=>URL.revokeObjectURL(url), 500);
    }

    // ===== Hook de envio
    document.getElementById('form').addEventListener('submit', (ev)=>{
      ev.preventDefault();
      validateIdentity();
      const cfg = buildConfig();
      const json = JSON.stringify(cfg, null, 2);
      const header = \`// site-config.js — gerado a partir do formulário SITE_CONFIG\n// Data: \${new Date().toISOString()}\n\n\`;
      const body = \`const SITE_CONFIG = \${json};\n\nexport default SITE_CONFIG;\n\`;
      download('site-config.js', header + body);
    });

    // Pré-visualização inicial
    showJson(); setTabs();
  </script>
</body>
</html>
