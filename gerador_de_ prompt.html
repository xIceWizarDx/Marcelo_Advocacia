<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Gerador de Configuração do Site</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  </head>
<body>
  <div class="container my-4">
    <div class="d-flex gap-2 align-items-center mb-3">
      <h1>Gerador de Configuração do Site</h1>
    </div>

    <div class="card p-3 mb-3">
      <p class="text-muted">
        Preencha as informações abaixo sobre sua empresa.
        Ao final, escolha baixar a configuração (JS) ou o texto do prompt (TXT).
      </p>
    </div>

    <form id="form" class="card p-3 mb-3">
      <!-- PROJECT -->
      <fieldset class="mb-3">
        <legend class="fw-semibold text-muted">Informações da empresa</legend>
        <div class="row g-3">
          <div class="col-md-6">
            <label class="form-label">Nome da empresa</label>
            <input type="text" class="form-control" id="project.name" placeholder="Ex.: Marcelo Baía Advocacia" required>
          </div>
          <div class="col-md-6">
            <label class="form-label">Slogan (opcional)</label>
            <input type="text" class="form-control" id="project.tagline" placeholder="Ex.: Assessoria jurídica clara e segura">
          </div>

          <div class="col-md-4">
            <label class="form-label">Segmento de atuação</label>
            <input type="text" class="form-control" id="project.sector_pack" list="sectors" value="servicos">
            <datalist id="sectors">
              <option value="advocacia"><option value="saude"><option value="financas">
              <option value="educacao"><option value="restaurante"><option value="servicos">
              <option value="varejo"><option value="tecnologia"><option value="evento"><option value="outro">
            </datalist>
          </div>
          <div class="col-md-4">
            <label class="form-label">Tipo de site</label>
            <input type="text" class="form-control" id="project.archetype" list="archs" value="institucional">
            <datalist id="archs">
              <option value="institucional"><option value="landing"><option value="portfolio">
              <option value="catalogo"><option value="saas"><option value="evento">
            </datalist>
          </div>
          <div class="col-md-4">
            <label class="form-label">Região</label>
            <input type="text" class="form-control" id="project.region_pack" list="regions" value="br">
            <datalist id="regions">
              <option value="br"><option value="eu"><option value="us"><option value="latam"><option value="global">
            </datalist>
          </div>

          <div class="col-md-6">
            <label class="form-label">Canal de contato principal</label>
            <input type="text" class="form-control" id="project.channel_pack.primary" list="channels" value="whatsapp">
          </div>
          <div class="col-md-6">
            <label class="form-label">Canal de contato secundário</label>
            <input type="text" class="form-control" id="project.channel_pack.secondary" list="channels" value="telefone">
            <datalist id="channels">
              <option value="whatsapp"><option value="telefone"><option value="formulario"><option value="telegram"><option value="email"><option value="none">
            </datalist>
          </div>

          <div class="col-md-4">
            <label class="form-label">Idioma do site</label>
            <input type="text" class="form-control" id="project.locale.lang" value="pt-BR">
          </div>
          <div class="col-md-4">
            <label class="form-label">Moeda padrão</label>
            <input type="text" class="form-control" id="project.locale.currency" value="BRL">
          </div>
          <div class="col-md-4">
            <label class="form-label">Fuso horário</label>
            <input type="text" class="form-control" id="project.locale.timezone" value="America/Cuiaba">
          </div>

          <div class="col-12">
            <label class="form-label">Tom de voz (estilo)</label>
            <input type="text" class="form-control" id="project.tone" list="tones" value="serio">
            <datalist id="tones">
              <option value="serio"><option value="tecnico"><option value="amigavel"><option value="premium"><option value="criativo">
            </datalist>
          </div>
        </div>
      </fieldset>

      <!-- IDENTIDADE -->
      <fieldset class="mb-3">
        <legend class="fw-semibold text-muted">Identidade e Contatos</legend>
        <div class="row g-3">
          <div class="col-md-6">
            <label class="form-label">Tipo de registro profissional</label>
            <input type="text" class="form-control" id="identity.registration.type" placeholder="Ex.: OAB/MT">
          </div>
          <div class="col-md-6">
            <label class="form-label">Número do registro</label>
            <input type="text" class="form-control" id="identity.registration.value" placeholder="Ex.: OAB/MT 14.159-B">
          </div>
          <div class="col-12">
            <label class="form-label">Endereço completo</label>
            <input type="text" class="form-control" id="identity.address" placeholder="Rua, número – bairro, cidade – UF – CEP">
          </div>
          <div class="col-md-6">
            <label class="form-label">Telefone para exibição</label>
            <input type="text" class="form-control" id="identity.phone_display" placeholder="(66) 99911-1314">
          </div>
          <div class="col-md-6">
            <label class="form-label">Telefone com link (tel:+...)</label>
            <input type="text" class="form-control" id="identity.phone_link" placeholder="tel:+5566999111314">
          </div>
          <div class="col-md-6">
            <label class="form-label">Link do WhatsApp (wa.me)</label>
            <input type="text" class="form-control" id="identity.whatsapp_wa_me" placeholder="https://wa.me/5566999111314">
          </div>
          <div class="col-md-6">
            <label class="form-label">E-mail</label>
            <input type="email" class="form-control" id="identity.email" placeholder="mailto:contato@exemplo.com">
          </div>
          <div class="col-12">
            <label class="form-label">Horário de atendimento</label>
            <input type="text" class="form-control" id="identity.hours" placeholder="Seg a Sex, 9h–18h">
          </div>
          <div class="col-md-6">
            <label class="form-label">Texto do botão principal (CTA)</label>
            <input type="text" class="form-control" id="identity.default_cta.primary" value="Falar no WhatsApp">
          </div>
          <div class="col-md-6">
            <label class="form-label">Texto do botão secundário</label>
            <input type="text" class="form-control" id="identity.default_cta.secondary" value="Ligar agora">
          </div>
        </div>
      </fieldset>

      <!-- THEME -->
      <fieldset class="mb-3">
        <legend class="fw-semibold text-muted">Cores e estilo</legend>
        <div class="row g-3">
          <div class="col-md-3"><label class="form-label">Cor primária</label><input type="color" class="form-control form-control-color w-100" id="theme.colors.primary" value="#0f172a" title="Escolha a cor primária"></div>
          <div class="col-md-3"><label class="form-label">Cor de destaque</label><input type="color" class="form-control form-control-color w-100" id="theme.colors.accent" value="#4f46e5" title="Escolha a cor de destaque"></div>
          <div class="col-md-3"><label class="form-label">Cor de sucesso</label><input type="color" class="form-control form-control-color w-100" id="theme.colors.success" value="#16a34a" title="Escolha a cor de sucesso"></div>
          <div class="col-md-3"><label class="form-label">Cor de alerta</label><input type="color" class="form-control form-control-color w-100" id="theme.colors.warning" value="#f59e0b" title="Escolha a cor de alerta"></div>
          <div class="col-md-3"><label class="form-label">Cor do texto principal</label><input type="color" class="form-control form-control-color w-100" id="theme.colors.textStrong" value="#334155" title="Escolha a cor do texto principal"></div>
          <div class="col-md-3"><label class="form-label">Cor do texto secundário</label><input type="color" class="form-control form-control-color w-100" id="theme.colors.textSoft" value="#475569" title="Escolha a cor do texto secundário"></div>
          <div class="col-md-3"><label class="form-label">Cor de fundo</label><input type="color" class="form-control form-control-color w-100" id="theme.colors.surface" value="#fafafa" title="Escolha a cor de fundo"></div>
          <div class="col-md-3"><label class="form-label">Cor da borda</label><input type="color" class="form-control form-control-color w-100" id="theme.colors.border" value="#e4e4e7" title="Escolha a cor da borda"></div>

          <div class="col-md-6"><label class="form-label">Fonte dos títulos</label><input type="text" class="form-control" id="theme.typography.headings" value="Merriweather, serif"></div>
          <div class="col-md-6"><label class="form-label">Fonte do texto</label><input type="text" class="form-control" id="theme.typography.body" value="Inter, sans-serif"></div>

          <div class="col-md-6"><label class="form-label">Arredondamento das bordas</label><input type="text" class="form-control" id="theme.radii" value="0.5rem"></div>
          <div class="col-md-3"><label class="form-label">Animação: duração mínima (ms)</label><input type="text" class="form-control" id="theme.motion.duration_min" value="150"></div>
          <div class="col-md-3"><label class="form-label">Animação: duração máxima (ms)</label><input type="text" class="form-control" id="theme.motion.duration_max" value="400"></div>
          <div class="col-12"><label class="form-label">Animação: easing</label><input type="text" class="form-control" id="theme.motion.easing" value="cubic-bezier(0.2,0.8,0.2,1)"></div>
        </div>
      </fieldset>

      <!-- EDIÇÃO DO PROJETO -->
      <fieldset class="mb-3">
        <legend class="fw-semibold text-muted">Estilo do projeto</legend>
        <div class="d-flex flex-wrap gap-2" role="radiogroup" aria-label="Estilo do projeto">
          <label class="form-check form-check-inline border rounded-pill px-2"><input type="radio" class="form-check-input" name="edition" id="edition.bootstrap" checked> Padrão (Bootstrap)</label>
          <label class="form-check form-check-inline border rounded-pill px-2"><input type="radio" class="form-check-input" name="edition" id="edition.tailwind"> Avançado (Tailwind)</label>
        </div>
        <p class="text-muted small">Alterar o estilo ajusta automaticamente as tecnologias abaixo.</p>
      </fieldset>

      <!-- STACK -->
      <fieldset class="mb-3">
        <legend class="fw-semibold text-muted">Tecnologias (opcional)</legend>
        <div class="d-flex flex-wrap gap-2">
          <span class="form-check form-check-inline border rounded-pill px-2"><input type="checkbox" class="form-check-input" id="stack.framework" checked>Next.js (estrutura)</span>
          <span class="form-check form-check-inline border rounded-pill px-2"><input type="checkbox" class="form-check-input" id="stack.typescript" checked>TypeScript</span>
          <span class="form-check form-check-inline border rounded-pill px-2"><input type="checkbox" class="form-check-input" id="stack.tailwind">Tailwind CSS</span>
          <span class="form-check form-check-inline border rounded-pill px-2"><input type="checkbox" class="form-check-input" id="stack.bootstrap" checked>Bootstrap</span>
          <span class="form-check form-check-inline border rounded-pill px-2"><input type="checkbox" class="form-check-input" id="stack.hosting" checked>Vercel (hospedagem)</span>
        </div>
        <p class="text-muted small">Deixe as opções padrão se não souber.</p>
      </fieldset>

      <!-- PAGES -->
      <fieldset class="mb-3">
        <legend class="fw-semibold text-muted">Páginas do site</legend>
        <div class="row g-3">
          <div class="col-md-6">
            <label class="form-label">Páginas principais</label>
            <div class="row row-cols-1 row-cols-md-2 g-2" id="includeList"></div>
          </div>
          <div class="col-md-6">
            <label class="form-label">Extras</label>
            <div class="row row-cols-1 row-cols-md-2 g-2" id="optionalList"></div>
          </div>
        </div>
        <p class="text-muted small">Selecione as páginas que deseja gerar.</p>
      </fieldset>

      <div class="d-flex flex-wrap gap-2 mt-2">
        <button type="submit" class="btn btn-primary">Baixar Configuração (JS)</button>
        <button type="button" id="previewJsonBtn" class="btn btn-outline-secondary">Ver JSON</button>
        <button type="button" id="previewPromptBtn" class="btn btn-outline-secondary">Ver Prompt</button>
        <button type="button" id="downloadPromptBtn" class="btn btn-primary">Baixar Prompt (TXT)</button>
      </div>
    </form>

    <div class="card p-3 mb-3">
      <div class="btn-group mb-3" role="group" aria-label="Visualização">
        <button type="button" class="btn btn-outline-secondary" id="tabJson" aria-selected="true">JSON</button>
        <button type="button" class="btn btn-outline-secondary" id="tabPrompt" aria-selected="false">Prompt</button>
      </div>
      <div id="preview" class="border rounded p-3 bg-white"></div>
    </div>
  </div>

  <script>
    // ===== Arrays de páginas (alinhados à arquitetura atual)
    const includes = [
      "home","sobre","atuacao","atuacao/civel","atuacao/consumidor","atuacao/familia","atuacao/empresarial",
      "faq","conteudo","contato","politica-de-privacidade","termos","acessibilidade"
    ];
    const optionals = ["sitemap.xml","robots.txt","humans.txt"];

    function mountCheckList(containerId, items, checked = true){
      const el = document.getElementById(containerId);
      el.innerHTML = "";
      items.forEach(name => {
        const id = containerId + '-' + name;
        const wrap = document.createElement('label');
        wrap.className = 'form-check d-flex align-items-center gap-2';
        wrap.innerHTML = \`<input type="checkbox" class="form-check-input" id="\${id}" \${checked ? 'checked':''}> <span class="form-check-label">\${name}</span>\`;
        el.appendChild(wrap);
      });
    }
    mountCheckList('includeList', includes, true);
    mountCheckList('optionalList', optionals, false);

    // ===== Helpers
    const $ = sel => document.querySelector(sel);
    function getVal(id){ return (document.getElementById(id)?.value || '').trim(); }
    function getBool(id){ return !!document.getElementById(id)?.checked; }

    // ===== Edition switch (Bootstrap vs Tailwind) -> ajusta chips do stack
    function applyEdition(){
      const isTailwind = document.getElementById('edition.tailwind').checked;
      const $tw = document.getElementById('stack.tailwind');
      const $bs = document.getElementById('stack.bootstrap');
      if ($tw) $tw.checked = isTailwind;
      if ($bs) $bs.checked = !isTailwind;
    }
    document.getElementById('edition.bootstrap').addEventListener('change', applyEdition);
    document.getElementById('edition.tailwind').addEventListener('change', applyEdition);

    // ===== Autosave (localStorage)
    const FORM_KEY = 'SITE_CONFIG_FORM_V2';
    function saveForm(){ localStorage.setItem(FORM_KEY, JSON.stringify(Object.fromEntries(new FormData(document.getElementById('form'))))); }
    function restoreForm(){
      const raw = localStorage.getItem(FORM_KEY); if(!raw) return;
      const data = JSON.parse(raw);
      Object.entries(data).forEach(([k,v])=>{
        const el = document.getElementById(k);
        if(!el) return;
        if(el.type==='checkbox' || el.type==='radio'){
          el.checked = (v === 'on' || v === true || v === 'true');
        }else{
          el.value = v;
        }
      });
      applyEdition();
    }
    window.addEventListener('DOMContentLoaded', restoreForm);
    document.getElementById('form').addEventListener('input', saveForm);

    // ===== Validações simples (wa.me e tel:)
    function validateIdentity(){
      const wa = getVal('identity.whatsapp_wa_me');
      const tel = getVal('identity.phone_link');
      if(wa && !/^https?:\/\/wa\.me\/\d+/.test(wa)) alert('WhatsApp deve ser https://wa.me/SEUNUMERO');
      if(tel && !/^tel:\+\d+/.test(tel)) alert('Telefone (link) deve começar com tel:+');
    }

    // ===== Build de config
    function buildConfig(){
      const include = includes.filter(n => document.getElementById('includeList-' + n).checked);
      const optional = optionals.filter(n => document.getElementById('optionalList-' + n).checked);
      const duration_min = parseInt(getVal('theme.motion.duration_min') || '150', 10);
      const duration_max = parseInt(getVal('theme.motion.duration_max') || '400', 10);

      // Stack flags
      const stack = {
        framework: getBool('stack.framework') ? 'nextjs' : '',
        typescript: getBool('stack.typescript'),
        tailwind: getBool('stack.tailwind'),
        bootstrap: getBool('stack.bootstrap'),
        hosting: getBool('stack.hosting') ? 'vercel' : ''
      };

      const cfg = {
        project: {
          name: getVal('project.name'),
          tagline: getVal('project.tagline'),
          sector_pack: getVal('project.sector_pack') || 'servicos',
          archetype: getVal('project.archetype') || 'institucional',
          region_pack: getVal('project.region_pack') || 'br',
          channel_pack: {
            primary: getVal('project.channel_pack.primary') || 'whatsapp',
            secondary: getVal('project.channel_pack.secondary') || 'telefone'
          },
          locale: {
            lang: getVal('project.locale.lang') || 'pt-BR',
            currency: getVal('project.locale.currency') || 'BRL',
            timezone: getVal('project.locale.timezone') || 'America/Cuiaba'
          },
          tone: getVal('project.tone') || 'serio'
        },
        identity: {
          registration: { type: getVal('identity.registration.type'), value: getVal('identity.registration.value') },
          address: getVal('identity.address'),
          phone_display: getVal('identity.phone_display'),
          phone_link: getVal('identity.phone_link'),
          whatsapp_wa_me: getVal('identity.whatsapp_wa_me'),
          email: getVal('identity.email'),
          hours: getVal('identity.hours'),
          default_cta: { primary: getVal('identity.default_cta.primary') || 'Falar no WhatsApp', secondary: getVal('identity.default_cta.secondary') || 'Ligar agora' }
        },
        theme: {
          colors: {
            primary: getVal('theme.colors.primary') || '#0f172a',
            accent: getVal('theme.colors.accent') || '#4f46e5',
            success: getVal('theme.colors.success') || '#16a34a',
            warning: getVal('theme.colors.warning') || '#f59e0b',
            textStrong: getVal('theme.colors.textStrong') || '#334155',
            textSoft: getVal('theme.colors.textSoft') || '#475569',
            surface: getVal('theme.colors.surface') || '#fafafa',
            border: getVal('theme.colors.border') || '#e4e4e7'
          },
          typography: {
            headings: getVal('theme.typography.headings') || 'Merriweather, serif',
            body: getVal('theme.typography.body') || 'Inter, sans-serif'
          },
          radii: getVal('theme.radii') || '0.5rem',
          motion: { duration: [duration_min, duration_max], easing: getVal('theme.motion.easing') || 'cubic-bezier(0.2,0.8,0.2,1)' }
        },
        stack: {
          framework: stack.framework || 'nextjs',
          typescript: stack.typescript,
          tailwind: stack.tailwind,
          bootstrap: stack.bootstrap,
          hosting: stack.hosting || 'vercel'
        },
        pages: { include, optional }
      };
      return cfg;
    }

    // ===== Gerador de PROMPT (TXT) — seções 0→4 (expansível)
    function generatePromptFromConfig(cfg){
      return `# 🧭 INSTRUÇÕES AO GERADOR (prioridade absoluta)

* Siga exatamente as seções abaixo. Em caso de conflito, priorize CONFIGURAÇÕES INICIAIS.
* PROIBIDO inserir qualquer menção a Rocket.new/DhiWise (em UI, README, comentários, meta).
* Responsividade planejada para dispositivos móveis é REQUISITO OBRIGATÓRIO.
* Todos os contatos devem ser idênticos em header, footer, /contato, CTAs, schemas e conteúdo.

---

# 0) CONFIGURAÇÕES INICIAIS (variáveis globais)

* Projeto/Marca: **${cfg.project.name}**
* Idioma: **${cfg.project.locale.lang}** | Moeda: **${cfg.project.locale.currency}** | Timezone: **${cfg.project.locale.timezone}**
* Identificação: **${(cfg.identity.registration.type||'') + ' ' + (cfg.identity.registration.value||'')}**
* Contatos oficiais:
  * Telefone (exibição): **${cfg.identity.phone_display || ''}**
  * Telefone (link): **${cfg.identity.phone_link || ''}**
  * WhatsApp (link obrigatório para TODOS os botões/links): **${cfg.identity.whatsapp_wa_me || ''}**
  * E-mail: **${cfg.identity.email || ''}**
  * Endereço: **${cfg.identity.address || ''}**
  * Horário: **${cfg.identity.hours || ''}**
* CTA padrão: **${cfg.identity.default_cta.primary}** (primário) | **${cfg.identity.default_cta.secondary}** (secundário)
* Tom & estilo: **${cfg.project.tone}**
* Regras OAB (Provimento 205/2021): sem promessas de resultado; conteúdo informativo; privacidade e consentimento claros.

---

# 1) STYLE / THEME (Design Tokens)
* Cores:
  * Primary: **${cfg.theme.colors.primary}**
  * Accent: **${cfg.theme.colors.accent}**
  * Success: **${cfg.theme.colors.success}**
  * Warning: **${cfg.theme.colors.warning}**
  * Text forte: **${cfg.theme.colors.textStrong}** | Text suave: **${cfg.theme.colors.textSoft}**
  * Surface: **${cfg.theme.colors.surface}** | Border: **${cfg.theme.colors.border}**
* Tipografia:
  * Headings: **"${cfg.theme.typography.headings}"** | Corpo: **"${cfg.theme.typography.body}"**
* Motion: **${cfg.theme.motion.duration[0]}–${cfg.theme.motion.duration[1]}ms**, easing **${cfg.theme.motion.easing}**
* Raios: **${cfg.theme.radii}**

---

# 2) STACK
* Next.js + TypeScript + ${cfg.stack.bootstrap ? 'Bootstrap 5' : (cfg.stack.tailwind ? 'Tailwind CSS' : 'CSS')}

---

# 3) ARQUITETURA
* Páginas incluídas:
${cfg.pages.include.map(p=>`  * /${p}`).join('\n')}
* Opcionais:
${cfg.pages.optional.map(p=>`  * ${p}`).join('\n')}

---

# 4) ROTAS & ARQUITETURA DE INFORMAÇÃO
(usar a lista acima como fonte da geração)

---`;
    }

    // ===== Preview em abas
    const $preview = document.getElementById('preview');
    let currentTab = 'json';
    function showJson(){ $preview.textContent = JSON.stringify(buildConfig(), null, 2); }
    function showPrompt(){ $preview.textContent = generatePromptFromConfig(buildConfig()); }
    document.getElementById('previewJsonBtn').addEventListener('click', ()=>{ currentTab='json'; setTabs(); showJson(); });
    document.getElementById('previewPromptBtn').addEventListener('click', ()=>{ currentTab='prompt'; setTabs(); showPrompt(); });
    document.getElementById('tabJson').addEventListener('click', ()=>{ currentTab='json'; setTabs(); showJson(); });
    document.getElementById('tabPrompt').addEventListener('click', ()=>{ currentTab='prompt'; setTabs(); showPrompt(); });
    function setTabs(){
      const jsonBtn = document.getElementById('tabJson');
      const promptBtn = document.getElementById('tabPrompt');
      jsonBtn.setAttribute('aria-selected', currentTab==='json');
      promptBtn.setAttribute('aria-selected', currentTab==='prompt');
      jsonBtn.classList.toggle('active', currentTab==='json');
      promptBtn.classList.toggle('active', currentTab==='prompt');
    }

    // ===== Downloaders
    document.getElementById('downloadPromptBtn').addEventListener('click', ()=>{
      const txt = generatePromptFromConfig(buildConfig());
      download('prompt-universal-preenchido.txt', txt, 'text/plain;charset=utf-8');
    });

    function download(filename, text, type='text/javascript;charset=utf-8'){
      const blob = new Blob([text], {type});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = filename;
      document.body.appendChild(a); a.click(); a.remove();
      setTimeout(()=>URL.revokeObjectURL(url), 500);
    }

    // ===== Hook de envio
    document.getElementById('form').addEventListener('submit', (ev)=>{
      ev.preventDefault();
      validateIdentity();
      const cfg = buildConfig();
      const json = JSON.stringify(cfg, null, 2);
      const header = \`// site-config.js — gerado a partir do formulário SITE_CONFIG\n// Data: \${new Date().toISOString()}\n\n\`;
      const body = \`const SITE_CONFIG = \${json};\n\nexport default SITE_CONFIG;\n\`;
      download('site-config.js', header + body);
    });

    // Pré-visualização inicial
    showJson(); setTabs();
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
